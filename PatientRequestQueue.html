<!DOCTYPE html>
<head>
	<title>d3.js</title>
	<script src="https://d3js.org/d3.v4.min.js"></script>
	<link href="https://fonts.googleapis.com/css?family=Open+Sans:300" rel="stylesheet">
</head>

<body></body>
<script>
	var names = ["Patient A", "Eric" ,"Vibhor", "Abhilash", "Christian Bale", "Donald Trump",
				   "Darth Vader", "Han Solo", "Some Dryer Lint", "Stuffs", "Vibhor2"];
	var requests = ["pooped pants", "needs water", "needs a gin and tonic on the rocks", "pooped his pants and bed", "looking for a pet chicken"];


	var box_height = 150;
	var box_width = 150;
	var n_line = 4; // number of cells per line
	var name_top_pad = .2; // padding at top of cell as fraction of box_height
	var req_top_pad = .4;
	var box_pad = .1;
	var font = "Open Sans"

	//stackoverflow.com/questions/336859/javascript-function-declaration-syntax-var-fn-function-vs-function-fn
	var spacing1 = function(d, i){
		return i*box_width + box_width/10 - box_width/2;
	}

	function box_spacing_x(d, i){
		return (i % n_line)*(1.1 * box_width);
	}

	function box_spacing_y(d, i){
		return Math.floor(i/n_line) * (1.1 * box_height);
	}

	function TESTSPACING(d, i){
		return Math.floor(i/n_line) * (1.1 * box_height) + 100;
	}

	function text_spacing_x(d, i){
		return (i % n_line) * (1.1 * box_width) + .5 * box_width;	
	}

	function name_spacing_y(d, i){
		return box_spacing_y(d, i) + name_top_pad * box_height;
	}

	function req_spacing_y(d, i){
		return name_spacing_y(d, i) + req_top_pad * box_height;
	}


	function color_wheel(d, i){
		var i = i % 4;
		if (i == 0){
			return "blue";
		} else if (i == 1){
			return "red";
		} else if (i == 2){
			return "purple";
		} else {
			return "yellow";
		}
	}

	// Define the element as a variable so we can modify svg with
	// svg.append("rect") instead of d3.select("svg").append("rect")
	var svg = d3.select("body")
				.append("svg")
				.attr("width", box_width * 1.1 * n_line)
				.attr("height", box_height * 10)

	//bars
	svg.selectAll("rect")
	   .data(names)
	   .enter()
		   .append("rect")
		   .attr("width", box_width)
		   .attr("height", box_height)
		   .attr("x", box_spacing_x)
		   .attr("y", box_spacing_y)
		   .attr("fill", color_wheel)
		   .attr("opacity", .4);

	//Patient label
	svg.selectAll("text")
		.data(names)
		.enter()
			.append("text")
			.text(function(d){return d;})
			.attr("font-family", font)
			.attr("font-size", "20px")
			.attr("x", text_spacing_x)
			.attr("y", name_spacing_y)
			.attr("text-anchor", "middle");

	svg.selectAll("text")
		.data(requests)
		.merge(svg.selectAll("text").data(requests))
			.append("text")
			.text(function(d){return d;})
			.attr("font-family", font)
			.attr("font-size", "14px")
			.attr("x", text_spacing_x)
			.attr("y", req_spacing_y)
			.attr("text-anchor", "middle");


	// // Moving boxes and text
	// function animation(element){
	// 	svg.selectAll(element).transition()
	// 	.attr("y", TESTSPACING)
	// 	// .attr("width", 125)
	// 	.duration(1500);
	// }
	// animation("text");
	// animation("rect");

	// Disappearing boxes
	function update(data){
		var box = svg.selectAll("rect").data(data)

		box.attr("class", "update");

		box.exit().remove()
	}
	// update(names)
	// update(names[2])
	


</script>













<body>
	<h1 style="font-family:Open Sans;">Patient Requests</h1>
	<h2></h2>
	<script>
		d3.select("h2")
			.text("Hello World");

		var data = [4, 8, 15, 16, 23, 42];

		var x = d3.scale.linear()
		    .domain([0, d3.max(data)])
		    .range([0, 420]);

		d3.select(".chart")
		  .selectAll("div")
		    .data(data)
		  .enter().append("div")
		    .style("width", function(d) { return x(d) + "px"; })
		    .text(function(d) { return d; });
	</script>
</body>